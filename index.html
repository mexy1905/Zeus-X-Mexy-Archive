<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zeus X Mexy · Arşiv</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0f0f10; --panel:#171717; --accent:#DC3545; --accent2:#FFB703; --muted:#a0a0a0; --text:#e6e6e6;
  --border: #232323;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,Arial;background:var(--bg);color:var(--text);min-height:100vh}
.header{position:fixed;left:0;right:0;top:0;height:64px;display:flex;align-items:center;gap:12px;padding:0 18px;background:linear-gradient(180deg,rgba(0,0,0,0.2),transparent);z-index:90}
.logo{font-weight:800;color:var(--accent);font-size:18px}
.header .actions{margin-left:auto;display:flex;gap:10px;align-items:center}
.btn{background:var(--panel);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
.btn.primary{background:linear-gradient(90deg,var(--accent),#b3303f);color:white;border:0}
.container{display:flex;padding-top:84px}

/* SIDEBAR */
.sidebar{width:260px;background:var(--panel);padding:18px;border-right:1px solid var(--border);height:calc(100vh - 84px);position:sticky;top:84px;overflow:auto}
.sidebar h3{margin:0 0 12px;color:var(--accent);font-weight:800}
.team{padding:10px;border-radius:8px;margin-bottom:8px;cursor:pointer;border:1px solid transparent}
.team:hover{background:#1b1b1b}
.team.open{border-color:rgba(255,183,3,0.12)}
.sub{margin-top:8px;padding-left:10px;display:none}
.team.open .sub{display:block}
.sub a{display:block;padding:8px;border-radius:6px;color:var(--muted);text-decoration:none}
.sub a:hover{background:#181818;color:var(--text)}

/* CONTENT */
.content{flex:1;padding:18px 24px}
.title{font-size:26px;font-weight:800;color:var(--accent);margin:0}
.subtitle{color:var(--muted);margin-top:6px;margin-bottom:18px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}

/* CARD */
.card{background:linear-gradient(180deg,#131313, #161616);border-radius:12px;overflow:hidden;border:1px solid var(--border);box-shadow:0 6px 20px rgba(0,0,0,0.6);position:relative}
.thumb{width:100%;height:180px;object-fit:cover;background:#222}
.card-body{padding:12px}
.card-title{font-weight:700;color:var(--accent);margin-bottom:6px}
.card-meta{color:var(--muted);font-size:13px}
.download{display:inline-block;margin-top:10px;padding:8px 10px;border-radius:8px;background:var(--accent2);color:#111;font-weight:800;text-decoration:none}

/* HOVER PREVIEW */
.preview-layer{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
.play-overlay{width:72px;height:72px;border-radius:999px;background:rgba(0,0,0,0.55);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .15s}
.card:hover .play-overlay{opacity:1;pointer-events:auto}
.play-overlay svg{transform:translateX(4px);fill:var(--accent2)}

/* PREVIEW VIDEO (inserted dynamically) */
.preview-video{position:absolute;top:6px;left:6px;right:6px;height:168px;border-radius:8px;object-fit:cover;display:none;z-index:9}

/* ADMIN PANEL (modal) */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:200}
.modal.open{display:flex}
.modal-box{background:var(--panel);padding:18px;border-radius:10px;width:420px;border:1px solid var(--border)}
.form-row{display:flex;gap:8px;margin-bottom:8px}
.form-row input, .form-row select, textarea{flex:1;padding:8px;border-radius:8px;background:#0f0f11;border:1px solid #222;color:var(--text)}
.small{font-size:13px;color:var(--muted);margin-top:8px}

/* RESPONSIVE */
@media(max-width:900px){.sidebar{display:none}.container{padding-top:92px}.content{padding:12px}}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="logo">ZEUS X MEXY</div>
  <div class="actions">
    <button class="btn" onclick="goHome()">Anasayfa</button>
    <button class="btn" onclick="logout()">Çıkış</button>
    <button class="btn primary" onclick="openAdmin()">Admin</button>
  </div>
</div>

<div class="container">
  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <h3>Takımlar</h3>

    <div class="team" onclick="toggleTeam(this)">
      Galatasaray
      <div class="sub">
        <a href="#" onclick="openCategory('Galatasaray','Şampiyonlar Ligi',event)">Şampiyonlar Ligi</a>
        <a href="#" onclick="openCategory('Galatasaray','Süper Lig',event)">Süper Lig</a>
        <a href="#" onclick="openCategory('Galatasaray','Avrupa Ligi',event)">Avrupa Ligi</a>
        <a href="#" onclick="openCategory('Galatasaray','Türkiye Kupası',event)">Türkiye Kupası</a>
        <a href="#" onclick="openCategory('Galatasaray','Hazırlık Maçları',event)">Hazırlık Maçları</a>
      </div>
    </div>

    <div class="team" onclick="toggleTeam(this)">
      Fenerbahçe
      <div class="sub">
        <a href="#" onclick="openCategory('Fenerbahçe','Şampiyonlar Ligi',event)">Şampiyonlar Ligi</a>
        <a href="#" onclick="openCategory('Fenerbahçe','Süper Lig',event)">Süper Lig</a>
        <a href="#" onclick="openCategory('Fenerbahçe','Avrupa Ligi',event)">Avrupa Ligi</a>
        <a href="#" onclick="openCategory('Fenerbahçe','Türkiye Kupası',event)">Türkiye Kupası</a>
        <a href="#" onclick="openCategory('Fenerbahçe','Hazırlık Maçları',event)">Hazırlık Maçları</a>
      </div>
    </div>

    <div class="team" onclick="toggleTeam(this)">
      Beşiktaş
      <div class="sub">
        <a href="#" onclick="openCategory('Beşiktaş','Şampiyonlar Ligi',event)">Şampiyonlar Ligi</a>
        <a href="#" onclick="openCategory('Beşiktaş','Süper Lig',event)">Süper Lig</a>
        <a href="#" onclick="openCategory('Beşiktaş','Avrupa Ligi',event)">Avrupa Ligi</a>
        <a href="#" onclick="openCategory('Beşiktaş','Türkiye Kupası',event)">Türkiye Kupası</a>
        <a href="#" onclick="openCategory('Beşiktaş','Hazırlık Maçları',event)">Hazırlık Maçları</a>
      </div>
    </div>
  </aside>

  <!-- CONTENT -->
  <main class="content">
    <h2 class="title">Maç Arşivi</h2>
    <div id="category-title" class="subtitle">Yükleniyor...</div>
    <div id="grid" class="grid"></div>
    <div id="empty" class="small" style="display:none">Bu kategoriye ait maç bulunmamaktadır.</div>
  </main>
</div>

<!-- ADMIN MODAL -->
<div id="modal" class="modal">
  <div class="modal-box">
    <h3 style="color:var(--accent)">Admin · Maç Ekle</h3>
    <div class="small">Bu basit admin localStorage kullanır. Sonradan dışa aktarılır/ben içe alırım.</div>
    <div style="height:10px"></div>
    <div class="form-row"><input id="m_team" placeholder="Takım (Galatasaray/Fenerbahçe/Beşiktaş)"></div>
    <div class="form-row"><input id="m_title" placeholder="Başlık (örn: Galatasaray - Fenerbahçe)"></div>
    <div class="form-row"><input id="m_league" placeholder="Lig (Süper Lig / Şampiyonlar Ligi)"></div>
    <div class="form-row"><input id="m_date" placeholder="Tarih (DD.MM.YYYY)"></div>
    <div class="form-row"><input id="m_fps" placeholder="Kalite (4K 60FPS)"></div>
    <div class="form-row"><input id="m_cover" placeholder="Cover URL (thumbnail)"></div>
    <div class="form-row"><input id="m_link" placeholder="İndirme/izleme linki (drive/başka)"></div>
    <div class="form-row"><input id="m_preview" placeholder="Opsiyonel: küçük preview video URL (mp4)"></div>
    <div style="display:flex;gap:8px;margin-top:10px">
      <button class="btn" onclick="closeAdmin()">İptal</button>
      <button class="btn primary" onclick="addMatch()">Ekle</button>
    </div>
    <div class="small" style="margin-top:10px">Not: Admin ile eklenen maçlar `localStorage.matches` içinde saklanır.</div>
  </div>
</div>

<script>
/* ---------- AUTH CHECK ---------- */
const storedKey = localStorage.getItem('mexy_archive_access');
const validKeys = ["Mexy1905@","Zeus1967@","NX7-PL8@2","G4L-TR9#1","VIP-MX21$","ARCHV-88!*","MXY-2025-OK","TRS!3492","BLUE-7X!90","KEY-9Zq@4","gs"];
if(!storedKey || !validKeys.includes(storedKey)){ window.location.href = 'login.html'; }

/* ---------- DATA LOADING ---------- */
/* matches are stored in localStorage under key 'matches'. If not present, start empty.
   When you send me the full list I can either:
     - give you a populated index.html (hardcoded matches array), or
     - you can paste JSON into browser console: localStorage.setItem('matches', JSON.stringify(ARRAY));
*/
function loadMatches(){
  const raw = localStorage.getItem('matches');
  if(!raw) return [];
  try { return JSON.parse(raw); } catch(e) { console.warn('matches parse error', e); return []; }
}
function saveMatches(arr){
  localStorage.setItem('matches', JSON.stringify(arr));
}

/* ---------- UI & RENDER ---------- */
let matches = loadMatches(); // user will supply later; admin can add
const grid = document.getElementById('grid');
const titleEl = document.getElementById('category-title');
const emptyEl = document.getElementById('empty');

function renderList(list){
  grid.innerHTML = '';
  if(!list || list.length===0){ emptyEl.style.display = 'block'; return; } else emptyEl.style.display = 'none';
  list.forEach((m, idx)=>{
    const card = document.createElement('div'); card.className='card';
    // thumbnail
    const img = document.createElement('img'); img.className='thumb'; img.src = m.cover || '//i.imgur.com/GzQWl1i.png';
    img.alt = m.title || 'Maç';
    card.appendChild(img);

    // preview video (if preview url provided)
    if(m.preview){
      const vid = document.createElement('video');
      vid.className = 'preview-video';
      vid.src = m.preview;
      vid.muted = true; vid.loop = true; vid.preload = 'metadata';
      card.appendChild(vid);
      // show/hide on hover events below
    }

    // overlay play
    const overlay = document.createElement('div'); overlay.className='preview-layer';
    const play = document.createElement('div'); play.className='play-overlay';
    play.innerHTML = '<svg width="32" height="32" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
    overlay.appendChild(play);
    card.appendChild(overlay);

    // body
    const body = document.createElement('div'); body.className='card-body';
    const h = document.createElement('div'); h.className='card-title'; h.innerText = m.title || 'Başlıksız';
    const meta = document.createElement('div'); meta.className='card-meta'; meta.innerText = `${m.league || '-'}  •  ${m.date || '-'}  •  ${m.fps || '-'}`;
    const a = document.createElement('a'); a.className='download'; a.href = m.link || '#'; a.target = '_blank'; a.innerText = 'İndir / İzle';

    body.appendChild(h); body.appendChild(meta); body.appendChild(a);
    card.appendChild(body);

    // hover behavior: if preview video exists, show it on hover; else just show overlay
    card.addEventListener('mouseenter', ()=>{
      const v = card.querySelector('video.preview-video');
      if(v){ v.style.display='block'; v.play().catch(()=>{}); card.querySelector('.thumb').style.opacity='0.0'; }
      card.querySelector('.play-overlay').style.opacity = 1;
    });
    card.addEventListener('mouseleave', ()=>{
      const v = card.querySelector('video.preview-video');
      if(v){ v.pause(); v.style.display='none'; card.querySelector('.thumb').style.opacity='1'; }
      card.querySelector('.play-overlay').style.opacity = 0;
    });

    grid.appendChild(card);
  });
}

/* ---------- CATEGORY FILTER ---------- */
function openCategory(team, league, e){
  if(e) e.preventDefault(), e.stopPropagation();
  const combined = `${team} · ${league}`;
  titleEl.innerText = `${team} — ${league}`;
  // we expect matches to have: team: "Galatasaray" and league: "Şampiyonlar Ligi" (case sensitive-ish)
  const filtered = matches.filter(m => (m.team === team) && ( (m.league && m.league.includes(league)) || m.category === league ));
  renderList(filtered);
}

/* ---------- INITIAL DEFAULT ---------- */
function goHome(){
  // default: Galatasaray Şampiyonlar Ligi
  openCategory('Galatasaray','Şampiyonlar Ligi');
}

/* ---------- SIDEBAR UTILS ---------- */
function toggleTeam(el){ el.classList.toggle('open'); }

/* ---------- ADMIN ---------- */
const modal = document.getElementById('modal');
function openAdmin(){ modal.classList.add('open'); }
function closeAdmin(){ modal.classList.remove('open'); }

function addMatch(){
  const m_team = document.getElementById('m_team').value.trim();
  const m_title = document.getElementById('m_title').value.trim();
  const m_league = document.getElementById('m_league').value.trim();
  const m_date = document.getElementById('m_date').value.trim();
  const m_fps = document.getElementById('m_fps').value.trim();
  const m_cover = document.getElementById('m_cover').value.trim();
  const m_link = document.getElementById('m_link').value.trim();
  const m_preview = document.getElementById('m_preview').value.trim();

  if(!m_team || !m_title){ alert('Takım ve başlık gerekli'); return; }

  const item = { team: m_team, title: m_title, league: m_league, date: m_date, fps: m_fps, cover: m_cover, link: m_link, preview: m_preview };
  matches.unshift(item);
  saveMatches(matches);
  closeAdmin();
  goHome(); // refresh default view (you can change)
}

/* ---------- LOGOUT ---------- */
function logout(){ localStorage.removeItem('mexy_archive_access'); window.location.href = 'login.html'; }

/* ---------- BOOT ---------- */
renderList([]); // initially empty grid (will fill below)
setTimeout(()=>{ // small delay to allow load
  // If there are saved matches, render default cat; else show empty and wait admin or your import
  matches = loadMatches();
  if(matches.length>0) goHome();
  else { titleEl.innerText = 'Henüz maç yok — admin ile ekle veya bana liste gönder'; emptyEl.style.display='block'; }
},150);
</script>
</body>
</html>

